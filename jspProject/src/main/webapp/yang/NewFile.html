<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Player with Resume</title>
</head>
<body>
    <h1>Music Player</h1>
    <audio id="audioPlayer" controls>
        <source src="../miniroom/img/10.mp3" type="audio/mp3">
        Your browser does not support the audio element.
    </audio>

    <script>
        // Get the audio player element
        const audioPlayer = document.getElementById('audioPlayer');

        // Check if there's a saved time in localStorage and resume playback
        window.onload = function () {
            const savedTime = localStorage.getItem('savedTime');
            if (savedTime) {
                audioPlayer.currentTime = parseFloat(savedTime);
            }

            // Automatically play the audio after setting the current time
            audioPlayer.play().catch((error) => {
                console.log('Autoplay was prevented:', error);
            });
        };

        // Save the current playback time in localStorage periodically
        audioPlayer.ontimeupdate = function () {
            localStorage.setItem('savedTime', audioPlayer.currentTime);
        };

        // Clear the saved time when the song ends
        audioPlayer.onended = function () {
            localStorage.removeItem('savedTime');
        };
    </script>
</body>
</html>
